<div class="form__accessories">
  <div class="form__accessories-grid">

    <!-- ====================== HEADER ========================= -->
    <div class="form__accessories-header">Spanish</div>
    <div class="form__accessories-header">English</div>
    <div class="form__accessories-header form__accessories-header--actions"></div>
    <!-- ====================== ACCESORIOS EXISTENTES ========================= -->
    @for (item of accessories().es; track $index) {
      <div class="form__accessories-cell">
        @if (isEditing($index)) {
          <input
            class="form__accessories-input form__accessories-input--edit"
            type="text"
            [value]="accessories().es[$index]"
            (blur)="saveEdit($index, 'es', $any($event.target).value)"
            (keydown.enter)="saveEdit($index, 'es', $any($event.target).value)"
            (keydown.escape)="cancelEdit()"
            [disabled]="disabled()"
            autofocus
          />
        } @else {
          <span class="form__accessories-text">{{ item || '—' }}</span>
        }
      </div>

      <div class="form__accessories-cell">
        @if (isEditing($index)) {
          <input
            class="form__accessories-input form__accessories-input--edit"
            type="text"
            [value]="accessories().en[$index]"
            (blur)="saveEdit($index, 'en', $any($event.target).value)"
            (keydown.enter)="saveEdit($index, 'en', $any($event.target).value)"
            (keydown.escape)="cancelEdit()"
            [disabled]="disabled()"
          />
        } @else {
          <span class="form__accessories-text">{{ accessories().en[$index] || '—' }}</span>
        }
      </div>

      <div class="form__accessories-cell form__accessories-cell--actions">
        <button
          type="button"
          class="form__accessories-btn"
          (click)="togleEdit($index)"
          [disabled]="disabled()"
          title="Edit"
        >
          @if (isEditing($index)) {
            <span class="material-icons-outlined">edit_off</span>
          } @else {
            <span class="material-icons-outlined">edit</span>
          }
        </button>
        <button
          type="button"
          class="form__accessories-btn form__accessories-btn--danger"
          (click)="removeAccessory($index)"
          [disabled]="disabled()"
          title="Delete"
        >
          <span class="material-icons-outlined">delete</span>
        </button>
      </div>
    }
    <!-- ====================== NEW ACCESSORY ========================= -->
    <div class="form__accessories-cell">
      <input
        #newAccessoryInput
        class="form__accessories-input"
        type="text"
        placeholder="Add Spanish..."
        [value]="newAccessoryEs()"
        (input)="newAccessoryEs.set($any($event.target).value)"
        (keydown.enter)="addAccessory()"
        [disabled]="disabled()"
      />
    </div>

    <div class="form__accessories-cell">
      <input
        class="form__accessories-input"
        type="text"
        placeholder="Add English..."
        [value]="newAccessoryEn()"
        (input)="newAccessoryEn.set($any($event.target).value)"
        (keydown.enter)="addAccessory()"
        [disabled]="disabled()"
      />
    </div>

    <div class="form__accessories-cell form__accessories-cell--actions">
      <button
        type="button"
        class="form__accessories-btn form__accessories-btn--primary"
        (click)="addAccessory()"
        [disabled]="disabled()"
        title="Add accessory"
      >
        <span class="material-icons-outlined">add</span>
      </button>
    </div>
    <!-- ====================== END ========================= -->
  </div>
</div>
